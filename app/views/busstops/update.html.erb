<table>
<tr><td colspan=2>
<h2><%= session[:stop_name] %></h2>

</td></tr>
<%= form_for :busstop, url: busstops_path do |f| %>
  <tr>
    <td>Direction: </td>
    <td>
    <% if session[:bearing_code][:needs_verification] == "true" %>
      <%= f.select :BearingCode, (BusStop.directionNames + ["needs verification"]).map.with_index{ |x, i| [x, BusStop.directionValues[i]]}, :selected => "unknown" %>
    <% else %>
      <%= f.select :BearingCode, (BusStop.directionNames + ["unknown"]).map.with_index{ |x, i| [x, BusStop.directionValues[i]]}, :selected => session[:bearing_code][:value] %>
    <% end %>
    </td>
  </tr>
  <tr>
    <td>Position (relative to intersection):</td>
    <td>
    <% if session[:intersection_pos][:needs_verification] == "true" %>
      <%= f.select :Intersection, (BusStop.intersectionPosNames + ["needs verification"]).map.with_index{ |x, i| [x, BusStop.intersectionPositionValues[i]]}, :selected => "unknown" %>
    <% else %>
      <%= f.select :Intersection, (BusStop.intersectionPosNames + + ["unknown"]).map.with_index{ |x, i| [x, BusStop.intersectionPositionValues[i]]}, :selected => session[:intersection_pos][:value] %>
    <% end %>
    </td>
  </tr>
  <tr>
    <td>Sign Type:</td>
    <td>
      <% if session[:sign_type][:needs_verification] == "true" %>
        <%= f.select :RteSignType, (BusStop.signTypeNames + ["needs verification"]).map.with_index{ |x, i| [x, BusStop.signTypeValues[i]]}, :selected => "unknown" %>
      <% else %>
        <%= f.select :RteSignType, (BusStop.signTypeNames + ["unknown"]).map.with_index{ |x, i| [x, BusStop.signTypeValues[i]]}, :selected =>session[:sign_type][:value] %>
      <% end %>
    </td>
  </tr>
  <tr>
    <td>Sign position:</td>
    <td>
      <% if session[:curb_inset][:needs_verification] == "true" %>
        <%= f.select :InsetFromCurb, (BusStop.curbInsetNames + ["needs verification"]).map.with_index{ |x, i| [x, BusStop.curbInsetValues[i]]}, :selected => "unknown" %>
      <% else %>
        <%= f.select :InsetFromCurb, (BusStop.curbInsetNames + ["unknown"]).map.with_index{ |x, i| [x, BusStop.curbInsetValues[i]]}, :selected => session[:curb_inset][:value] %>
      <% end %>
      </td>
    </tr>
    <tr>
      <td>Schedule holder:</td>
      <td>
        <% if session[:sched_holder][:needs_verification] == "true" %>
          <%= f.select :SchedHolder, (BusStop.scheduleTypeNames + ["needs verification"]).map.with_index{ |x, i| [x, BusStop.scheduleTypeValues[i]]}, :selected => "unknown" %>
        <% else %>
          <%= f.select :SchedHolder, (BusStop.scheduleTypeNames + ["unknown"]).map.with_index{ |x, i| [x, BusStop.scheduleTypeValues[i]]}, :selected => session[:sched_holder][:value] %>
      <% end %>
      </td>
    </tr>
    <tr>
      <td>Number of shelters:</td>
      <td>
        <% if session[:shelter_count][:needs_verification] == "true" %>
          <%= f.select :Shelters, (BusStop.shelterCountNames + ["needs verification"]).map.with_index{ |x, i| [x, BusStop.shelterCountValues[i]]}, :selected => "unknown" %>
        <% else %>
          <%= f.select :Shelters, (BusStop.shelterCountNames + ["unknown"]).map.with_index{ |x, i| [x, BusStop.shelterCountValues[i]]}, :selected => session[:shelter_count][:value] %>
      <% end %>
      </td>
    </tr>
    <tr>
      <td>Number of benches:</td>
      <td>
        <% if session[:bench_count][:needs_verification] == "true" %>
          <%= f.select :BenchCount, (BusStop.benchCountNames + ["needs verification"]).map.with_index{ |x, i| [x, BusStop.benchCountValues[i]]}, :selected => "unknown" %>
        <% else %>
          <%= f.select :BenchCount, (BusStop.benchCountNames + ["unknown"]).map.with_index{ |x, i| [x, BusStop.benchCountValues[i]]}, :selected => session[:bench_count][:value] %>
        <% end %>
      </td>
    </tr>
    <tr>
      <td>Is there a trash can?:</td>
      <td>
        <% if session[:can_count][:needs_verification] == "true" %>
          <%= f.select :HasCan, (BusStop.trashCanNames + ["needs verification"]).map.with_index{ |x, i| [x, BusStop.trashCanValues[i]]}, :selected => "unknown" %>
        <% else %>
          <%= f.select :HasCan, (BusStop.trashCanNames + ["unknown"]).map.with_index{ |x, i| [x, BusStop.trashCanValues[i]]}, :selected => session[:can_count][:value] %>
        <% end %>
      </td>
    </tr>
  </table>
  <% if session[:user_email] %>
  <p>
    Additional information:
      <%= f.text_area :StopComment, :value =>session[:comment], :rows =>3 %>
    
  </p>
  <% end %>
  
  <%= f.hidden_field :UserIP, :value => request.remote_ip %>
  <%= f.hidden_field :UserId, :value => session[:user_email] %>
  <%= f.hidden_field :StopId, :value => session[:stop_id] %>
  <%= f.hidden_field :AgencyId, :value => session[:agency_id] %>
  <%= f.hidden_field :DateCreated, :value => Time.now %>

  <%= f.label :at_stop do %>
  <%= f.check_box :UserAtStop %> I am currently at this stop.
  <% end %>
  <p>
    <%= f.submit "Verify" %>
  </p>
<% end %>
<%= link_to 'Information collection details', "/InformationStatementV6.pdf" %>
</div>
</div>