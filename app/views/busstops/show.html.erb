<table cellpadding = "10" style="max-width: 500px;">
<tr> <td></td>
    <% if cookies[:user_email] %>
      <td> Logged in as <%= cookies[:user_email].to_s %><br/> 
      <%= link_to "View Profile", "/reputation/profile" %><br/>
      <%= link_to "Log out", "/logout/" %> </td>
    <% else %>
      <td><a href = "/login/">Log in with <%= image_tag 'fb_icon_325x325.png', :alt=>"Facebook", :width=> '20'%> or <%= image_tag 'Google-G-Logo.png', :alt=>"Google", :width=> '20'%></a></td>
    <% end %>
<tr><td colspan=2>
<h2><%= session[:stop_name] %>,</h2><h3><%= session[:direction] %> bound</h3>
</td></tr>

  <% if session[:closure][:status] == "closed" %> 
    <% if session[:closure][:enddate] == "none" %>
      <tr>
        <td colspan=2>
          <h4 style="color:red">This stop was reported closed on <%= session[:closure][:reported] %>.</h4> 
          Date of reopening is unknown.<br />
          <%= link_to 'Update closure status', "/closed/"+ params[:id] %> 
        </td>
      </tr>
    <% else %>
      <tr>
        <td colspan=2>
          <h4 style="color:red">This stop was reported closed, reopening on <%= session[:closure][:enddate] %>.</h4>
          <%= link_to 'Update closure status', "/closed/"+ params[:id] %> 
        </td>
      </tr>
    <% end %>
  <% end %> 
  <tr>
  <td colspan=2><i>* indicates information that needs verification</i></td>
  </tr>
  <tr>
    <td>Position from intersection:</td>
    <td>
        <% if session[:intersection_pos][:value] != "unknown" %>
          <%= session[:intersection_pos][:value] %>,
          <% if session[:intersection_pos][:needs_verification] == "true" %> * <% end %> 
        <% end %>
        <%= session[:intersection_distance] %> feet from intersection <%= image_tag "question-mark.jpg", :width => "18px", :alt=> "more information about position", :data => { :helptype => "intersection" } %> 
    
    </td>
  </tr>
  <tr id="intersection" style="background-color: #eee; display:none;">
    <td colspan=2 id="intersection help text">
      <%= Help.INTERSECTIONHELP_CONST[BusStop.STOPPOSITIONVALUES_CONST.index(session[:intersection_pos][:value])] %><br />
      <a href="#" data-help-image="intersection image" id="intersection image link">(display example image)</a>
    </td>
  </tr>
  <tr id="intersection image" style="background-color: #eee; display:none;">
    <td colspan=2 id="intersection image content">
        <%= image_tag Help.INTERSECTIONIMG_CONST[BusStop.STOPPOSITIONVALUES_CONST.index(session[:intersection_pos][:value])], :width => "100%", :alt=> Help.INTERSECTIONIMGALT_CONST[BusStop.STOPPOSITIONVALUES_CONST.index(session[:intersection_pos][:value])]%> 
    </td>
  </tr>  
  <% if session[:sign_type][:value] != "unknown" %>
    <tr>
      <td>Sign type:</td>
      <td>
        <%= BusStop.SIGNTYPENAMES_CONST[BusStop.SIGNTYPEVALUES_CONST.index(session[:sign_type][:value])] %>
        <% if session[:sign_type][:needs_verification] == "true" %> * <% end %>
        
        <%= image_tag "question-mark.jpg", :width => "18px", :alt=> "more information about sign type", :data => { :helptype => "sign type" } %> 
      </td>
    </tr>
    <tr id="sign type" style="background-color: #eee; display:none;">
      <td colspan=2 id="sign type help text">
        <%= Help.SIGNTYPEHELP_CONST[BusStop.SIGNTYPEVALUES_CONST.index(session[:sign_type][:value])] %><br />
        <a href="#" data-help-image="sign type image" id="sign type image link">(display example image)</a>
      </td>
    </tr>
    <tr id="sign type image" style="background-color: #eee; display:none;">
      <td colspan=2 id="sign type image content">
        <% if BusStop.SIGNTYPEVALUES_CONST.index(session[:sign_type][:value]) <= Help.SIGNTYPEIMG_CONST.length %>
          <%= image_tag Help.SIGNTYPEIMG_CONST[BusStop.SIGNTYPEVALUES_CONST.index(session[:sign_type][:value])], :width => "100%", :alt=> Help.SIGNTYPEIMGALT_CONST[BusStop.SIGNTYPEVALUES_CONST.index(session[:sign_type][:value])]%> 
        <% end %>
      </td>
    </tr>
  <% end %>
  <% if session[:sign_inset][:value] != "unknown" %>
    <tr>
      <td>Sign position:</td>
      <td>
        <%= BusStop.SIGNINSETNAMES_CONST[BusStop.SIGNINSETVALUES_CONST.index(session[:sign_inset][:value])] %> 
        <% if session[:sign_inset][:needs_verification] == "true" %> * <% end %>
        <%= image_tag "question-mark.jpg", :width => "18px", :alt=> "more information about sign position", :data => { :helptype => "sign position" } %> 
      </td>
    </tr>
    <tr id="sign position" style="background-color: #eee; display:none;">
      <td colspan=2 id="sign position help text">
        <%= Help.SIGNPOSITIONHELP_CONST[BusStop.SIGNINSETVALUES_CONST.index(session[:sign_inset][:value])] %><br />
      </td>
    </tr>
  <% end %>
  <% if session[:sched_holder][:value] != "unknown" %>
    <tr>
      <td>Schedule holder:</td>
      <td>
        <%= session[:sched_holder][:value] %>
        <% if session[:sched_holder][:needs_verification] == "true" %> * <% end %>
        <%= image_tag "question-mark.jpg", :width => "18px", :alt=> "more information about schedule holders", :data => { :helptype => "schedule" } %> 
      </td>
    </tr>
    <tr id="schedule" style="background-color: #eee; display:none;">
      <td colspan=2 id="schedule help text">
        <%= Help.SCHEDULEHELP_CONST[BusStop.SCHEDULEVALUES_CONST.index(session[:sched_holder][:value])] %><br />
      </td>
    </tr>
  <% end %>
  <% if session[:shelter_count][:value] != "unknown" %>
    <tr>
      <td>Number of shelters:</td>
      <td>
        <%= BusStop.SHELTERCOUNTNAMES_CONST[BusStop.SHELTERCOUNTVALUES_CONST.index(session[:shelter_count][:value])] %>
        <% if session[:shelter_count][:needs_verification] == "true" %> * <% end %>
      </td>
    </tr>
  <% end %>
  <% if (session[:shelter_count][:value] != "0") && (session[:shelter_count][:value] != "unknown") && (session[:shelter_count][:needs_verification] == "false") &&  session[:shelter_offset][:value] != "unknown" %>
    <tr>
      <td>Shelter position:</td>
      <td>
        <%= BusStop.SHELTERINSETNAMES_CONST[BusStop.SHELTERINSETVALUES_CONST.index(session[:shelter_offset][:value])] %>
        <% if session[:shelter_offset][:needs_verification] == "true" %> * <% end %>
        <%= image_tag "question-mark.jpg", :width => "18px", :alt=> "more information about shelter position", :data => { :helptype => "shelter position" } %> 
      </td>
    </tr>
    <tr id="shelter position" style="background-color: #eee; display:none;">
      <td colspan=2 id="shelter position help text">
        <%= Help.SHELTERPOSITIONHELP_CONST[BusStop.SHELTERINSETVALUES_CONST.index(session[:shelter_offset][:value])] %><br />
      </td>
    </tr>
  <% end %>
  <% if (session[:shelter_count][:value] != "0") && (session[:shelter_count][:value] != "unknown") && (session[:shelter_count][:needs_verification] == "false") && session[:shelter_orientation][:value] != "unknown" %>
    <tr>
      <td>The shelter faces:</td>
      <td>
        <%= BusStop.SHELTERORIENTATIONNAMES_CONST[BusStop.SHELTERORIENTATIONVALUES_CONST.index(session[:shelter_orientation][:value])] %>
        <% if session[:shelter_orientation][:needs_verification] == "true" %> * <% end %>
        <%= image_tag "question-mark.jpg", :width => "18px", :alt=> "more information about shelter orientation", :data => { :helptype => "shelter orientation" } %> 
      </td>
    </tr>
    <tr id="shelter orientation" style="background-color: #eee; display:none;">
      <td colspan=2 id="shelter orientation help text">
        <%= Help.SHELTERORIENTATIONHELP_CONST[BusStop.SHELTERORIENTATIONVALUES_CONST.index(session[:shelter_orientation][:value])] %><br />
      </td>
    </tr>
  <% end %>
  <% if session[:bench_count][:value] != "unknown" %>
    <tr>
      <td>Number of benches:</td>
      <td>
        <%= BusStop.BENCHCOUNTNAMES_CONST[BusStop.BENCHCOUNTVALUES_CONST.index(session[:bench_count][:value])] %>
        <% if session[:bench_count][:needs_verification] == "true" %> * <% end %>
      </td>
    </tr>
  <% end %>
  <% if session[:can_count][:value] != "unknown" %>
    <tr>
      <td>Trash can?:</td>
      <td>
        <%= session[:can_count][:value] %>
        <% if session[:can_count][:needs_verification] == "true" %> * <% end %>
      </td>
    </tr>
  <% end %>
  <% if session[:lighting][:value] != "unknown" %>
    <tr>
      <td>Well-lit at night?:</td>
      <td>
        <%= BusStop.LIGHTINGNAMES_CONST[BusStop.LIGHTINGVALUES_CONST.index(session[:lighting][:value])] %>
        <% if session[:lighting][:needs_verification] == "true" %> * <% end %>
      </td>
    </tr>
  <% end %>
  <% if session[:comment] != "" %>
    <tr>
      <td>Additional information:</td>
      <td>
        <%= session[:comment] %>
      </td>
    </tr>
  <% end %>
  <tr><td colspan=2 height=20></td></tr>
  <tr>
    <td><%= link_to 'Verify or add stop information', "/update/"+ params[:id] %></td>
    <% if session[:closure][:status] == "open" %> 
    <td><%= link_to 'Report stop closure', "/closed/"+ params[:id] %></td>
    <% end %>
  </tr>
  <tr><td colspan=2 height=20></td></tr>
  <tr>
    <td><%= link_to 'What is StopInfo?', "/" %></td>
    <td><%= link_to 'What do these fields mean?', "/about/fields" %></td>
  </tr>
</table>
